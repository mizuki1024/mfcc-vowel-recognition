# MFCC-based Japanese Vowel Recognition System

日本語5母音（あ、い、う、え、お）のリアルタイム認識システム。MFCC（メル周波数ケプストラム係数）とフォルマント分析を使用した音声認識プログラムです。

## 概要

このプロジェクトは複数のPythonプログラムで構成されています：

1. **recording.py** - 母音サンプルの録音ツール
2. **MFCC34.py** - フル機能版の母音認識システム（MFCC3,4使用）
3. **MFCC34simple.py** - 簡略版の母音認識システム（MFCC3,4使用）
4. **vowel_recognition_mfcc13.py** - 13次元MFCC使用の高精度認識システム

## システムの流れ

```
recording.py → 学習データ作成
    ↓
recordings_formant/ ディレクトリに保存
    ↓
MFCC34.py, MFCC34simple.py, または vowel_recognition_mfcc13.py で認識
```

## 各ファイルの詳細

### 1. recording.py - 母音サンプル録音ツール

#### 概要
学習データとなる母音サンプルを録音するためのツールです。

#### 機能
- 各母音（あ、い、う、え、お）を30サンプルずつ録音
- 1サンプルあたり1秒間の録音
- カウントダウン表示で録音タイミングを案内
- `recordings_formant/`ディレクトリに自動保存

#### 使用方法
```bash
python recording.py
```

#### 出力ファイル形式
- `recordings_formant/a_1.wav` から `a_30.wav`
- `recordings_formant/i_1.wav` から `i_30.wav`
- 以下同様に各母音30ファイル

### 2. MFCC34.py - フル機能版母音認識システム

#### 概要
MFCC3,4係数とフォルマント分析を組み合わせた高精度な母音認識システムです。

#### 主要機能
- **リアルタイム母音認識**: 1秒ごとに音声を録音し、即座に認識
- **MFCC特徴抽出**: MFCC3,4（インデックス2,3）を使用
- **フォルマント分析**: LPC分析によるF1,F2,F3の抽出
- **i/e判別強化**: 第2フォルマント（F2）を重視した判別アルゴリズム

#### 可視化機能（3つの図）
1. **MFCC空間図**
   - 2次元空間での母音分布を表示
   - リアルタイムで認識結果をプロット
   - 曖昧母音（ə）の理論位置も表示

2. **フォルマントチャート**
   - F1-F2平面での母音分布
   - 音響音声学の慣例に従った軸設定

3. **伝統的母音図**
   - 舌の位置による母音分類
   - 前舌-後舌、高-低の2次元表示
   - リアルタイムで推定位置を表示

#### パラメータ設定
```python
IE_DISTINGUISH = True    # i/e判別機能の有効化
IE_BIAS = 0.8           # iをeより優先する度合い
VERY_SIMILAR_THRESHOLD = 0.85  # 高類似度の閾値
```

#### 使用方法
```bash
python MFCC34.py
```

### 3. MFCC34simple.py - 簡略版母音認識システム

#### 概要
MFCC34.pyの軽量版。コア機能は同じですが、表示を最小限にして処理速度を向上させています。

#### 主要機能
- MFCC34.pyと同じ認識アルゴリズム
- MFCC3,4係数とフォルマント分析を使用
- 個別サンプルとの比較を無効化して高速化

#### 可視化機能（1つの図のみ）
- **MFCC空間図**のみを表示
- フォルマントチャートと母音図は削除

#### 使用シーン
- シンプルな認識結果だけが必要な場合
- 処理速度を重視する場合
- 画面スペースが限られている場合

#### 使用方法
```bash
python MFCC34simple.py
```

### 4. vowel_recognition_mfcc13.py - 13次元MFCC高精度認識システム

#### 概要
全13次元のMFCC特徴量を使用した高精度な母音認識システムです。より多くの音響特徴を捉えることで、認識精度を向上させています。

#### 主要機能
- **13次元MFCC使用**: MFCC0〜MFCC12のすべての係数を活用
- **リアルタイム認識**: 1秒ごとに音声を録音し、即座に認識
- **MFCC重要度分析**: 各係数の母音識別への貢献度を自動分析
- **テンプレートマッチング**: ユークリッド距離による分類

#### 可視化機能（2つの図）
1. **MFCCプロファイル**
   - 13次元すべてのMFCC値をリアルタイム表示
   - 各母音のテンプレートとの比較
   
2. **距離バーチャート**
   - 各母音との距離を可視化
   - 認識結果をハイライト表示

#### 分析機能
- 母音ごとのMFCCプロファイル比較
- 各MFCC係数の識別力（分散）分析
- 最も重要なMFCC係数の自動特定
- ヒートマップによる可視化

#### 使用シーン
- 最高精度の認識が必要な場合
- 音響特徴の詳細な分析が必要な場合
- 研究・教育目的での使用

#### 使用方法
```bash
python vowel_recognition_mfcc13.py
```

## 必要な環境

### Pythonバージョン
- Python 3.7以上

### 必要なライブラリ
```bash
pip install numpy
pip install sounddevice
pip install soundfile
pip install librosa
pip install matplotlib
pip install scikit-learn
pip install scipy
```

### 動作環境
- macOS, Windows, Linux
- マイク入力が必要

## セットアップ手順

1. リポジトリをクローン
```bash
git clone https://github.com/mizuki1024/mfcc-vowel-recognition.git
cd mfcc-vowel-recognition
```

2. 必要なライブラリをインストール
```bash
pip install -r requirements.txt
```

3. 学習データを作成
```bash
python recording.py
```

4. 母音認識を実行
```bash
# フル機能版（MFCC3,4使用）
python MFCC34.py

# 簡略版（MFCC3,4使用）
python MFCC34simple.py

# 高精度版（13次元MFCC使用）
python vowel_recognition_mfcc13.py
```

## 技術的な詳細

### MFCC（メル周波数ケプストラム係数）
- 人間の聴覚特性を考慮した音声特徴量
- MFCC34.py/MFCC34simple.py: MFCC3,4を使用（中域周波数の情報）
- vowel_recognition_mfcc13.py: 13次元すべてを使用（全周波数帯域の情報）
- フォルマント周波数と高い相関

### フォルマント分析
- LPC（線形予測符号化）による分析
- F1: 第1フォルマント（舌の高さに対応）
- F2: 第2フォルマント（舌の前後位置に対応）
- F3: 第3フォルマント（補助的情報）

### 認識アルゴリズム
1. 音声録音（1秒間）
2. 無音区間除去
3. MFCC特徴抽出
4. フォルマント抽出
5. テンプレートマッチング
6. 距離計算と分類

## プロジェクトの特徴

- **リアルタイム処理**: 1秒ごとに認識結果を更新
- **高精度なi/e判別**: フォルマント情報を活用
- **視覚的フィードバック**: 複数の可視化手法
- **発音アドバイス機能**: 各母音の発音方法を表示
- **拡張性**: 新しい母音や言語への対応が可能

## ライセンス

MIT License

## 作者

Mizuki Murata

## 謝辞

このプロジェクトは音声認識と音響音声学の研究成果を基に開発されました。